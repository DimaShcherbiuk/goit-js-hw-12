{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getImagesGallery(imageSearch, page, perPage) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: '42985969-a702e02b9d921ed7e13374797',\n        q: imageSearch,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        per_page: perPage,\n        page: page,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.log('Error', error);\n    throw error();\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const setGallery = document.querySelector('.gallery');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n});\nlightbox.refresh();\n\nexport function renderFunction(imageSet) {\n  imageSet.forEach(image => {\n    const imagesGallery = `<li class=\"img-blok\">\n        <a href=\"${image.largeImageURL}\">     \n    <img  src=\"${image.webformatURL}\"\n    data-source=\"${image.largeImageURL}\"\n    alt=\"${image.tags}\">\n     <ul class=\"image-descript\">\n      <li><h3>likes</h3><p>${image.likes}</p></li>\n      <li><h3>views</h3><p>${image.views}</p></li>\n      <li><h3>comments</h3><p>${image.comments}</p></li>\n      <li><h3>downloads</h3><p>${image.downloads}</p></li>\n     </ul>\n   </a>\n   </li>`;\n\n    setGallery.insertAdjacentHTML('beforeend', imagesGallery);\n  });\n  lightbox.refresh();\n}\n\nexport function showEndOfCollectionMessage() {\n  const endMessage = document.createElement('p');\n  endMessage.classList.add('end-message');\n  endMessage.textContent =\n    \"We're sorry, but you've reached the end of search results.\";\n\n  setGallery.insertAdjacentElement('afterend', endMessage);\n}\n","import { getImagesGallery } from './js/pixabay-api';\nimport {\n  setGallery,\n  showEndOfCollectionMessage,\n  renderFunction,\n} from './js/render-function';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet imageSearch = '';\nlet pageCounter = 1;\nconst perPage = 15;\n\nconst form = document.querySelector('.form');\nconst inputElement = document.querySelector('.search-input');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.btn-load-more');\nconst scrollTopBtn = document.querySelector('.scroll-top');\n\nconst showLoader = () => {\n  loader.style.display = 'flex';\n};\nconst hideLoader = () => {\n  loader.style.display = 'none';\n};\nconst handleLoad = () => {\n  document.body.classList.add('loaded');\n  document.body.classList.remove('loaded_hiding');\n};\nwindow.onload = handleLoad;\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  hideLoadMoreBtn();\n\n  imageSearch = inputElement.value.trim();\n  pageCounter = 1;\n\n  setGallery.innerHTML = '';\n\n  if (!imageSearch.length) {\n    iziToast.error({\n      color: '#fff021',\n      message: `Please fill in the field for search query.`,\n      position: 'topRight',\n    });\n    setGallery.innerHTML = '';\n    return;\n  }\n\n  hideEndOfCollectionMessage();\n  showLoader();\n  try {\n    const imageSet = await getImagesGallery(imageSearch, pageCounter, perPage);\n    const totalHits = imageSet.totalHits;\n\n    if (imageSet.hits.length === 0) {\n      setGallery.innerHTML = '';\n\n      iziToast.error({\n        color: '#EF4040',\n        messageColor: '#ffffff',\n        message: `❌ Sorry, there are no images matching your search query. Please try again!`,\n        position: 'topRight',\n      });\n      hideLoadMoreBtn();\n      return;\n    } else {\n      renderFunction(imageSet.hits);\n      inputElement.value = '';\n      showLoadMoreBtn();\n    }\n    if (perPage * pageCounter >= totalHits) {\n      hideLoadMoreBtn();\n      showEndOfCollectionMessage();\n    }\n  } catch (error) {\n    console.log('Error fetching images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n    handleLoad();\n  }\n\n  loadMoreBtn.addEventListener('click', async () => {\n    showLoader();\n\n    try {\n      if (loadMoreBtn) {\n        pageCounter += 1;\n      }\n      const imageSet = await getImagesGallery(\n        imageSearch,\n        pageCounter,\n        perPage\n      );\n      const totalHits = imageSet.totalHits;\n      renderFunction(imageSet.hits);\n      showLoader();\n      if (perPage * pageCounter >= totalHits) {\n        hideLoadMoreBtn();\n        showEndOfCollectionMessage();\n      }\n\n      const galleryCardHeight =\n        setGallery.firstElementChild.getBoundingClientRect().height;\n      window.scrollBy({ top: galleryCardHeight * 3, behavior: 'smooth' });\n    } catch (error) {\n      console.error('Error fetching more images:', error);\n      iziToast.error({\n        title: 'Error',\n        message: `Error fetching more images: ${error}`,\n      });\n    } finally {\n      hideLoader();\n    }\n  });\n});\n\nfunction showLoadMoreBtn() {\n  loadMoreBtn.style.display = 'block';\n}\n\nfunction hideLoadMoreBtn() {\n  loadMoreBtn.style.display = 'none';\n}\n\nfunction hideEndOfCollectionMessage() {\n  const endMessage = document.querySelector('.end-message');\n  if (endMessage) {\n    endMessage.remove();\n  }\n}\n\nwindow.addEventListener('scroll', () => {\n  if (document.body.scrollTop > 30 || document.documentElement.scrollTop > 30) {\n    scrollTopBtn.style.display = 'flex';\n  } else {\n    scrollTopBtn.style.display = 'none';\n  }\n});\n\nfunction scrollTop() {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n}\nscrollTopBtn.addEventListener('click', scrollTop);\n"],"names":["BASE_URL","getImagesGallery","imageSearch","page","perPage","axios","error","setGallery","lightbox","SimpleLightbox","renderFunction","imageSet","image","imagesGallery","showEndOfCollectionMessage","endMessage","pageCounter","form","inputElement","loader","loadMoreBtn","scrollTopBtn","showLoader","hideLoader","handleLoad","e","hideLoadMoreBtn","iziToast","hideEndOfCollectionMessage","totalHits","showLoadMoreBtn","galleryCardHeight","scrollTop"],"mappings":"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"}